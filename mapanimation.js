// This array contains the coordinates for all points along the bus route
const routePoints = [
  [71.09445,42.35986],
  [-71.09445,42.35986],
  [-71.09454,42.35992],
  [-71.0946,42.35996],
  [-71.09473,42.36005],
  [-71.09478,42.36008],
  [-71.09488,42.36014],
  [-71.09511,42.36033],
  [-71.09533,42.36045],
  [-71.09541,42.3605],
  [-71.09561,42.36062],
  [-71.09562,42.36062],
  [-71.09565,42.36063],
  [-71.09571,42.36067],
  [-71.09572,42.36067],
  [-71.09601,42.36084],
  [-71.09653,42.36115],
  [-71.09661,42.36119],
  [-71.09696,42.36136],
  [-71.09688,42.36189],
  [-71.09686,42.36199],
  [-71.09685,42.3621],
  [-71.09679,42.36254],
  [-71.09671,42.36321],
  [-71.09661,42.36379],
  [-71.0966,42.36388],
  [-71.09649,42.3642],
  [-71.09645,42.3643],
  [-71.09644,42.36435],
  [-71.09628,42.3648],
  [-71.09625,42.36487],
  [-71.09606,42.36535],
  [-71.0958,42.36604],
  [-71.09578,42.36608],
  [-71.09576,42.36619],
  [-71.09575,42.36624],
  [-71.09573,42.36631],
  [-71.0957,42.3664],
  [-71.09551,42.3669],
  [-71.09546,42.36702],
  [-71.09544,42.36705],
  [-71.09541,42.3671],
  [-71.09639,42.36749],
  [-71.09646,42.36752],
  [-71.09662,42.36758],
  [-71.09673,42.36763],
  [-71.09688,42.36768],
  [-71.09704,42.36775],
  [-71.09726,42.36784],
  [-71.09737,42.36788],
  [-71.09752,42.36794],
  [-71.09821,42.36821],
  [-71.0984,42.36828],
  [-71.099,42.36852],
  [-71.09908,42.36855],
  [-71.09977,42.36882],
  [-71.09995,42.36889],
  [-71.10009,42.36895],
  [-71.10054,42.36912],
  [-71.10104,42.36932],
  [-71.10202,42.36971],
  [-71.10294,42.37008],
  [-71.10312,42.37015],
  [-71.10322,42.37019],
  [-71.10359,42.37033],
  [-71.10362,42.37034],
  [-71.10377,42.3704],
  [-71.10409,42.37053],
  [-71.10422,42.37058],
  [-71.10474,42.37078],
  [-71.10484,42.37082],
  [-71.10499,42.37088],
  [-71.10573,42.37117],
  [-71.10609,42.37131],
  [-71.10681,42.3716],
  [-71.10684,42.37161],
  [-71.1074,42.37183],
  [-71.10769,42.37195],
  [-71.10795,42.37205],
  [-71.10799,42.37207],
  [-71.10862,42.37232],
  [-71.10922,42.37256],
  [-71.10957,42.37269],
  [-71.10973,42.37275],
  [-71.11016,42.37292],
  [-71.11037,42.37301],
  [-71.11084,42.3732],
  [-71.11099,42.37326],
  [-71.11137,42.37341],
  [-71.11171,42.37355],
  [-71.1119,42.37362],
  [-71.11245,42.37383],
  [-71.11277,42.37396],
  [-71.11294,42.37403],
  [-71.11296,42.37404],
  [-71.1131,42.37409],
  [-71.11329,42.37417],
  [-71.11338,42.37422],
  [-71.11346,42.37426],
  [-71.11356,42.37432],
  [-71.11364,42.37437],
  [-71.1144,42.3748],
  [-71.11442,42.37486],
  [-71.11444,42.3749],
  [-71.11445,42.37492],
  [-71.11445,42.37494],
  [-71.11445,42.37495],
  [-71.11445,42.37496],
  [-71.11445,42.375],
  [-71.11445,42.37502],
  [-71.11434,42.37544],
  [-71.11432,42.3755],
  [-71.11431,42.37558],
  [-71.11428,42.37568],
  [-71.11427,42.37572],
  [-71.11426,42.37575],
  [-71.11425,42.37583],
  [-71.11425,42.37592],
  [-71.11424,42.37599],
  [-71.11423,42.37606],
  [-71.11419,42.37623],
  [-71.11416,42.37636],
  [-71.11416,42.37637],
  [-71.11409,42.37663],
  [-71.11431,42.37658],
  [-71.11448,42.37655],
  [-71.11476,42.37649],
  [-71.1151,42.37642],
  [-71.11557,42.37632],
  [-71.11563,42.37631],
  [-71.11565,42.37631],
  [-71.11567,42.37631],
  [-71.11568,42.37631],
  [-71.1157,42.37633],
  [-71.11571,42.37634],
  [-71.11572,42.37635],
  [-71.11572,42.37637],
  [-71.11588,42.37677],
  [-71.11594,42.37697],
  [-71.11601,42.37714]
];

// Mapbox access token
mapboxgl.accessToken = 'pk.eyJ1Ijoia3NlbmdsYW5kIiwiYSI6ImNsMm1oZXR4NjFyeHYzZHBsbGF6OHB3NHEifQ.J7j72Z2D94n0BHExlDJfBA';

// This is the map instance
let map = new mapboxgl.Map({
  container: 'map',
  style: 'mapbox://styles/mapbox/satellite-streets-v11',
  center: [-71.10484,42.37082],
  zoom: 13,
});

// Adds marker to the map at the first coordinates in the array routePoints. 
const marker = new mapboxgl.Marker()
.setLngLat([71.09445,42.35986,0])
.addTo(map);
// counter here represents the index of the current route point
let counter = 0;

// Moves the marker on the map every every 2000ms. 
function move() {
  
  setTimeout(() => {
    if (counter >= routePoints.length) return;
  marker.setLngLat(routePoints[counter]);
    counter++;
    move();
  }, 2000);
}

// Do not edit code past this point
if (typeof module !== 'undefined') {
  module.exports = { move };
}
